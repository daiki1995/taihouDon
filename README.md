# 🎮 砲台シューティングゲーム

THREE.jsを使用した3D砲台シューティングゲームです。60秒間でできるだけ多くの敵を撃破してハイスコアを目指しましょう！

![Game Screenshot](https://img.shields.io/badge/THREE.js-r128-blue)
![Physics](https://img.shields.io/badge/Physics-Cannon.js-green)
![Rendering](https://img.shields.io/badge/Rendering-PBR-orange)

## ✨ 特徴

- **3Dグラフィックス**: THREE.jsによる美しい3D描画
- **PBRレンダリング**: 物理ベースレンダリングによるリアルな質感
- **物理演算**: Cannon.jsによるリアルな弾道計算
- **タイムアタック**: 60秒間のスコアアタックモード
- **練習モード**: 的を使った射撃練習
- **敵マシマシモード**: 超高難度の挑戦モード
- **直感的な操作**: キーボードのみで完結する操作性

## 🎯 ゲームの目的

制限時間60秒以内に、空中を移動する敵をできるだけ多く撃破してハイスコアを目指します。時間経過とともに敵の出現速度と数が増加し、難易度が上昇します。

## 🕹️ 操作方法

### キーボード操作
- **W/↑キー**: 砲身を上げる
- **S/↓キー**: 砲身を下げる
- **A/←キー**: 砲台を左に旋回
- **D/→キー**: 砲台を右に旋回
- **スペースキー**: 弾を発射

## 🚀 起動方法

### 必要なもの
- モダンなWebブラウザ（Chrome、Firefox、Safari推奨）
- ローカルサーバー（セキュリティ制約のため）

### 起動手順

#### 方法1: Python を使う場合
```bash
# Python 3の場合
python3 -m http.server 8000

# Python 2の場合
python -m SimpleHTTPServer 8000
```

#### 方法2: Node.js を使う場合
```bash
# http-serverをインストール（初回のみ）
npm install -g http-server

# サーバーを起動
http-server -p 8000
```

#### 方法3: VS Code の Live Server 拡張機能
1. VS Code で Live Server 拡張機能をインストール
2. `index.html` を右クリック
3. "Open with Live Server" を選択

その後、ブラウザで以下のURLにアクセス:
```
http://localhost:8000
```

## 📊 ゲームモード

### 通常モード
- 制限時間: **60秒**
- 初期敵数: **5-6体**
- 敵の出現間隔: **2秒 → 0.5秒**（時間経過で加速）
- 最大同時出現数: **10体 → 25体**（時間経過で増加）

### 練習モード
- 時間制限なし
- 8個の固定された的で射撃練習
- オレンジと黄色の円錐形ターゲット
- いつでも「ゲームに戻る」ボタンでスタート画面へ

### 敵マシマシモード
- 制限時間: **60秒**
- 初期敵数: **15-18体**
- 敵の出現間隔: **0.6秒 → 0.1秒**（超高速）
- 最大同時出現数: **30体 → 80体**（超大量）
- リザルト画面から挑戦可能な超高難度モード

## 🎯 スコアと評価

### スコア計算
- 敵を1体撃破: **10点**
- 的を1個破壊: **5点**

### パフォーマンス評価（リザルト画面）
- **30体以上**: 「すごい！完璧です！」
- **20-29体**: 「素晴らしい腕前ですね！」
- **10-19体**: 「いい感じです！」
- **4-9体**: 「もう少し頑張りましょう！」
- **0-3体**: 「練習あるのみ！」

## 🛠️ 技術スタック

- **THREE.js (r128)**: 3Dグラフィックスレンダリング
- **PBRマテリアル**: 物理ベースレンダリングによるリアルな質感表現
- **Cannon.js (0.6.2)**: 物理エンジン
- **HTML5/CSS3**: UI/UX
- **Vanilla JavaScript**: ゲームロジック

### PBR実装の特徴
- **MeshStandardMaterial**: すべてのオブジェクトで使用
- **トーンマッピング**: ACESFilmicで映画的な表現
- **環境ライティング**: 半球ライトによる自然な照明
- **物理的に正確な光**: リアルな光の減衰と反射
- **高品質シャドウ**: 2048×2048のシャドウマップ

## 📁 ファイル構成

```
taihouDon/
├── index.html      # メインHTMLファイル
├── game.js         # ゲームロジック
├── style.css       # スタイルシート
├── taihouDON.txt   # 仕様書
└── README.md       # このファイル
```

## 🎨 ゲーム要素

### プレイヤー（砲台）
- 地面に固定された金属製の砲台
- メタリック素材（粗さ0.2-0.4、メタリック0.8-0.95）
- 360度旋回可能
- 砲身の仰角調整可能（0度～60度）

### 敵
- 発光する赤い球体で表現
- 空中を3次元的に移動
- PBRマテリアルによる発光効果（emissiveIntensity: 0.3）
- ランダムな軌道で出現

### 弾丸
- メタリックな黒い球体（半径1.0）
- 重力の影響を受けて放物線を描く
- 高いメタリック値（0.9）で金属的な光沢

### 練習モードの的
- オレンジと黄色の円錐形
- 発光エフェクト付き
- 8個が固定位置に配置

## 🎯 ゲームのコツ

1. **敵の移動を予測**: 敵の移動方向を見て先読みして発射
2. **仰角を調整**: 遠くの敵には高めの角度で発射
3. **練習モードで慣れる**: まず固定の的で操作に慣れる
4. **連射を活用**: スペースキーで連続発射
5. **時間管理**: 60秒という制限時間を意識
6. **敵マシマシモードへの挑戦**: 通常モードで20体以上撃破できたら挑戦してみよう

## 🔧 カスタマイズ

`game.js` の `CONFIG` オブジェクトで以下の設定を変更できます:

```javascript
const CONFIG = {
    GRAVITY: -9.8,                          // 重力
    CANNON_ROTATION_SPEED: 0.02,            // 砲台旋回速度
    CANNON_ELEVATION_SPEED: 0.02,           // 砲身上下速度
    BULLET_SPEED: 50,                       // 弾速
    BULLET_LIFETIME: 5000,                  // 弾の寿命（ミリ秒）
    ENEMY_BASE_SPEED: 0.3,                  // 敵の基本速度
    GAME_TIME: 60,                          // ゲーム時間（秒）
    
    // 通常モード
    ENEMY_SPAWN_INTERVAL_INITIAL: 2000,     // 初期出現間隔（ミリ秒）
    ENEMY_SPAWN_INTERVAL_MIN: 500,          // 最小出現間隔
    MAX_ENEMIES_INITIAL: 10,                // 初期最大敵数
    MAX_ENEMIES_FINAL: 25,                  // 最終最大敵数
    
    // 敵マシマシモード
    MASHIMASHI_SPAWN_INTERVAL_INITIAL: 600, // 初期出現間隔
    MASHIMASHI_SPAWN_INTERVAL_MIN: 100,     // 最小出現間隔
    MASHIMASHI_MAX_ENEMIES_INITIAL: 30,     // 初期最大敵数
    MASHIMASHI_MAX_ENEMIES_FINAL: 80        // 最終最大敵数
};
```

## 🐛 トラブルシューティング

### ゲームが起動しない
- ブラウザのコンソールでエラーを確認
- ローカルサーバーが起動しているか確認
- `file://` プロトコルではなく `http://` でアクセスしているか確認

### パフォーマンスが悪い
- ブラウザのハードウェアアクセラレーションを有効化
- 他のタブを閉じてメモリを解放
- より高性能なブラウザ（Chrome推奨）を使用

## 📝 ライセンス

このプロジェクトは学習・研究目的で作成されています。

## 🙏 使用ライブラリ

- [THREE.js](https://threejs.org/) - MIT License
- [Cannon.js](https://github.com/schteppe/cannon.js) - MIT License

---

**楽しいゲーム体験を！** 🎮✨
